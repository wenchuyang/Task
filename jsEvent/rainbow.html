<!DOCTYPE html>
<!--
Created using JS Bin
http://js.jirengu.com

Copyright (c) 2018 by wenchuyang (http://js.jirengu.com/muxes/3/edit)

Released under the MIT license: http://jsbin.mit-license.org
-->
<meta name="robots" content="noindex">
<html>
<head>
 <script
  src="https://code.jquery.com/jquery-2.2.4.min.js"
  integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="
  crossorigin="anonymous"></script>
  <meta charset="utf-8">
  <title>JS Bin</title>
<style id="jsbin-css">
.{margin: 0; padding: 0;}
div{
  margin: 15px;
  display: inline-block;
  border-radius: 50%;
  transition: all 1s;
  border: 1px solid black;
  background-color: white;
}
div{
}
.purple.active{
  background-color: purple;
}
.cyan.active{
  background-color: cyan;
}
.blue.active{
  background-color: blue;
}
.green.active{
  background-color: green;
}
.yellow.active{
  background-color: yellow;
}
.orange.active{
  background-color: orange;
}
.red.active{
  background-color: red;
}
.purple{
  width: 50px;
  height: 50px;
}

</style>
</head>
<body>
<div class="red">
  <div class="orange">
    <div class="yellow">
      <div class="green">
        <div class="blue">
          <div class="cyan">
            <div class="purple"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<script id="jsbin-javascript">
let divs = $('div').get() //变成数组
var time = 0
for (let i = 0; i < divs.length; i++) {
  divs[i].addEventListener('click', () => {
    if(time>=divs.length*2){time = 0}  
    setTimeout( ()=>{
        divs[i].classList.add('active')
      }, 500*time)
      time++
  }, true)
  divs[i].addEventListener('click', () => {
      setTimeout( ()=>{
        divs[i].classList.remove('active')
      }, 500*time)
      time++
  }, false)
}

//为什么let可以实现？因为每次都是不同的i值。js引擎会记下上一次的值用来初始化本轮循环的变量i。
//click事件里边的函数是在click事件触发的时候执行的。也就是说，如果没有触发click事件的话，那么time也就不会执行加一。
</script>
</body>
</html>
